



{% extends 'base.html' %}
{% load staticfiles %}
{% block contents %}


<link rel="stylesheet" href="{% static 'promise/css/homeLandscape.css' %}">

<script
  src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>



<body>
        
        

        <div id="homeRightCon">
                <div id="myProfiles">
                        <!-- 프로필 사진 보여주기 -->
                        <div>
                           
        {% if user.profile_image == '' %}
        <img style="border-radius:50%" width="60" height="60" src="{% static 'promise/user.png' %}" />
        {% else %}
        <img style="border-radius:50%" width="60" height="60" src="{{user.thumbnail_image}}" />
        {% endif %}

    </div>
    <div id="myProfileNames">
    {{user.name}}
    <div style="float:right;"><a  href="{% url 'kakao' operation='logout'%}">로그아웃</a></div></span>
    <div id="myProfileIns">{{ user.state_msg  }}</div>
                        
                        </div>
                        </div>
                        <div style="background-color:#F4F2F0;padding-left: 10px;display:flex;"><span style="display: inline;"><a href="{% url 'mypage' %}">마이페이지</a> <img style="height:15px" src="{% static 'promise/notice.png' %}"></span>
                            <div style="flex:1 1 50%;"><marquee direction="right">test</marquee></div>
                            
                             </div>
                    
                        <div class="menu_tabs">
                                
                            <ul>

                                <li class="actives"><a href="#"; onclick="tab_menus(0);">친구신청</a></li>
                                {% if noti_add_friend %}
                            
                                <span id="newControls">
                                <span id="newFriendNews">new</span>
                                <span id="newFirendBts"></span>
                                </span>
                            {% endif %}


                                <li><a href="#" onclick="tab_menus(1);">초대 및 댓글</a></li>
                                {% if noti_promise %}
                                <span id="newControls">
                                <span id="newFriendNews">new</span>
                                <span id="newFirendBts"></span>
                                </span>
                            {% endif %}
                            </ul>
                        </div>
                        <div class="menu_tabs0" id="panels" >
                                {% if not noti_add_friend %}
                                    너는 친구도없니? <br>
                                {% endif %}
                                {% for noti in noti_add_friend %}
                                    <strong style="color:#D84339">{{noti.send_user.name}}</strong>님께서 친구 신청을 하였습니다. 
                                    <a href="{% url 'change_friend' operation='ok' pk=noti.send_user.id %}">수락</a> | <a href="{% url 'change_friend' operation='deny' pk=noti.send_user.id %}">거절</a><br>
                    
                                {% endfor %}
                        
                        </div>
                        <!--------------------------->
                        <div class="menu_tabs1" id="panels" style="display:none;"><!-- 초대 알림 란-->
                            {% for noti in noti_promise %}
                            {% if noti.com_or_pro == 'p' %}
                            <div class="notiPromise">
                                    <div class="notiL">
                                        <a href="{% url 'noti_promise_button' operation='click' pk=noti.id %}" >{{noti.send_user.name}}님이 {{noti.promise.title}}에 초대했습니다.</a>
                                    </div>   
                                    <div class="notiR">
                                      <a href="{% url 'promise_acpt' operation='acpt' promise_id=noti.promise.id %}"><button class="nbtn">수락</button></a>
                                      <a href="{% url 'promise_acpt' operation='deny' promise_id=noti.promise.id %}"><button class="nbtn">거절</button></a>
                                    </div>
                                </div>
                                {% elif noti.com_or_pro == 'c' %}
        <div class="notiPromise">
            <div class="notiL">
                <a href="{% url 'noti_promise_button' operation='click' pk=noti.id %}">{{noti.send_user.name}}님이 {{noti.promise.title}}에 댓글을 남겼습니다.</a>
            </div>   
            <div class="notiR">
                <a href="{% url 'noti_promise_button' operation='delete' pk=noti.id %}"><button class="nbtn" style="width: 84px;">지우기</button></a>
            </div>
        </div>
        {% endif %}

                        {% endfor %}
                        {% if not noti_promise %}
                        <p style="margin:10px">알림이 없어요 ^^</p>
                        {% endif %}
                        </div>
                        
                        <script>
                        function tab_menus(num){
                            var f = $('.menu_tabs').find('li');
                            for(var i =0; i<f.length; i++){
                                if(i==num){
                                    f.eq(i).addClass('actives');
                                    $('.menu_tabs' + i).show();
                                }else{
                                    f.eq(i).removeClass('actives');
                                    $('.menu_tabs' + i).hide();
                                }
                            }
                        }
                        </script>
            
        </div>

        <a href="{% url 'search' %}"> 회원검색 </a>

        <!-- 약속게시물 -->
        <div>
        <h2 >(진행중인 약속)</h2>
        <!-- 도착 -->
        <div style="display: flex;flex-wrap: wrap;">
        {% for arrive in arrives %}
            {% if arrive.promise.end == 0 %}
            <div class="pcard"></div>
                    <a href="{% url 'detail' pk=arrive.promise.id %}">
                        
                        <div class="promiseCard">{{arrive.promise.title}}</div>
                            <span>{{arrive.promise.setting_date_time}}(도착)</span>

                    </a>
            {% endif %}
        {% endfor %}
    </div>
    </div>
        <hr> 
        <!-- 미도착 -->
        <div style="display: flex;flex-wrap: wrap;">
        {% for no_arrive in no_arrives %}
            {% if no_arrive.promise.end == 0 %}
        
            <div class="pcard">
                                <a href="{% url 'detail' pk=no_arrive.promise.id %}">
                                    <div class="promiseCard">  {{no_arrive.promise.title}}</div>
                                        <span>{{no_arrive.promise.setting_date_time}}(미도착)</span>
                                        <!-- <a href="{% url 'detail' pk=no_arrive.promise.id %}"></a> -->
                                </a>
                                </div>   
                           
           
            {% endif %}
        {% endfor %}      
    </div>


    <div>
        <h2 >(시간이 지난 약속)</h2>
        <div style="display: flex;flex-wrap: wrap;">
        {% for promise in promises %}
        {% if user.username == promise.user.username or user.username in promise.pre_party %}
        {% if promise.end == 1 %}
       
        
        
            <div class="pcard">
                    <a href="{% url 'detail' pk=promise.id %}">
                <div class="promiseCard">{{promise.title}}</div>
                <span>{{promise.setting_date_time}}</span>
            </a>
            
            </div>   
        
   
                {%endif%}
                {% endif %}
    {% endfor %}
</div>
</div>



    </div>
                    

 



























</body>
{% endblock %}

